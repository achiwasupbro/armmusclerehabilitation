# ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö iOS

## 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Firebase Project

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Firebase Console](https://console.firebase.google.com/)
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "Create a project" ‡∏´‡∏£‡∏∑‡∏≠ "Add project"
3. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ ‡πÄ‡∏ä‡πà‡∏ô "arm-rehabilitation"
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Continue" ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à

## 2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Realtime Database

1. ‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ã‡πâ‡∏≤‡∏¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Realtime Database"
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "Create Database"
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å location (‡πÄ‡∏ä‡πà‡∏ô asia-southeast1)
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Start in test mode" (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö)
5. ‡∏Ñ‡∏•‡∏¥‡∏Å "Enable"

## 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Security Rules (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö)

‡πÉ‡∏ô Realtime Database > Rules ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà:

```json
{
  "rules": {
    ".read": true,
    ".write": true
  }
}
```

**‚ö†Ô∏è ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ô‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ security ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°**

## 4. ‡∏î‡∏π Config ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Project Settings (‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)
2. ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡πÑ‡∏õ‡∏´‡∏≤ "Your apps"
3. ‡∏Ñ‡∏•‡∏¥‡∏Å "Add app" > ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Web (</>) 
4. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ app ‡πÄ‡∏ä‡πà‡∏ô "arm-rehab-web"
5. ‡∏Ñ‡∏•‡∏¥‡∏Å "Register app"
6. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å config object

## 5. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå firebase-config.js

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `firebase-config.js` ‡πÇ‡∏î‡∏¢‡πÉ‡∏™‡πà config ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4:

```javascript
const firebaseConfig = {
    apiKey: "your-api-key-here",
    authDomain: "your-project.firebaseapp.com",
    databaseURL: "https://your-project-default-rtdb.asia-southeast1.firebasedatabase.app/",
    projectId: "your-project-id",
    storageBucket: "your-project.appspot.com",
    messagingSenderId: "123456789",
    appId: "your-app-id"
};
```

## 6. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï ESP32 Code

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `esp32-firebase.ino`:

1. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `firebaseHost` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö `databaseURL` ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
2. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `deviceId` ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥ (‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ MAC address)

```cpp
const char* firebaseHost = "https://your-project-default-rtdb.asia-southeast1.firebasedatabase.app";
const char* deviceId = "esp32_001"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥
```

## 7. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö

1. Upload code ‡πÑ‡∏õ‡∏ó‡∏µ‡πà ESP32
2. ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡πÉ‡∏ô iOS Safari
3. ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ESP32" 
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "üî• Firebase Mode"
5. ‡∏Ñ‡∏•‡∏¥‡∏Å "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠"
6. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡πà‡∏á‡πÇ‡∏´‡∏°‡∏î‡∏ï‡πà‡∏≤‡∏á‡πÜ

## 8. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Firebase

‡πÉ‡∏ô Firebase Console > Realtime Database ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:

```
/
‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îî‚îÄ‚îÄ esp32_001/
‚îÇ       ‚îî‚îÄ‚îÄ currentMode/
‚îÇ           ‚îú‚îÄ‚îÄ mode: 1
‚îÇ           ‚îú‚îÄ‚îÄ arm: "right"
‚îÇ           ‚îú‚îÄ‚îÄ timestamp: 1234567890
‚îÇ           ‚îî‚îÄ‚îÄ status: "completed"
‚îî‚îÄ‚îÄ devices/
    ‚îî‚îÄ‚îÄ esp32_001/
        ‚îú‚îÄ‚îÄ status/
        ‚îÇ   ‚îú‚îÄ‚îÄ status: "online"
        ‚îÇ   ‚îî‚îÄ‚îÄ lastSeen: 1234567890
        ‚îî‚îÄ‚îÄ progress/
            ‚îú‚îÄ‚îÄ mode: 1
            ‚îú‚îÄ‚îÄ round: 5
            ‚îú‚îÄ‚îÄ totalRounds: 20
            ‚îú‚îÄ‚îÄ action: "‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤"
            ‚îî‚îÄ‚îÄ isRunning: true
```

## 9. ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö WiFi ‡∏Ç‡∏≠‡∏á ESP32
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Firebase URL ‡πÅ‡∏•‡∏∞ config
- ‡∏î‡∏π Serial Monitor ‡∏Ç‡∏≠‡∏á ESP32

### ‡∏ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡πÇ‡∏´‡∏°‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Security Rules
- ‡∏î‡∏π Console ‡∏Ç‡∏≠‡∏á browser (F12)
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Network tab ‡πÉ‡∏ô Developer Tools

### ‡∏ñ‡πâ‡∏≤ iOS ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:
- ‡πÉ‡∏ä‡πâ Safari (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Chrome)
- ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï microphone ‡πÉ‡∏ô Settings > Safari
- ‡∏•‡∏≠‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö

## 10. Security (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Rules ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤:

```json
{
  "rules": {
    "commands": {
      "$deviceId": {
        ".write": true,
        ".read": true
      }
    },
    "devices": {
      "$deviceId": {
        ".write": true,
        ".read": true
      }
    }
  }
}
```

‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Firebase Authentication ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤